<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>CREATE NEW ACCOUNT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.4/css/bulma.min.css"/>
    <h:outputStylesheet name="css/CreateUserPage.css" />

</h:head>
<h:body>
    <p class="title has-text-centered m-3">Create your account</p>
    <br/><br/>

    <h:form>
        <div class="box user-creation-box">
                <h:outputText value="Username"/>
                <h:inputText id="username" value="#{userBean.username}" required="true" requiredMessage="Enter a valid username" styleClass="input" />
                <h:message for="username" styleClass="error-message" />

                <h:outputText value="First Name"/>
                <h:inputText id="firstname" value="#{userBean.firstName}" required="true" requiredMessage="Enter a valid First Name" styleClass="input" />
                <h:message for="firstname" styleClass="error-message" />

                <h:outputText value="Last Name"/>
                <h:inputText id="lastname" value="#{userBean.lastName}" required="true" requiredMessage="Enter a valid Last Name"  styleClass="input" />
                <h:message for="lastname" styleClass="error-message" />

                <h:outputText value="E-mail"/>
                <h:inputText id="email" value="#{userBean.email}" validatorMessage="This is not a valid email format." styleClass="input">
                    <f:validateRegex pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}" />
                </h:inputText>
                <h:message for="email" styleClass="error-message" />

                <h:outputText value="Password"/>
                <h:inputSecret id="password" value="#{userBean.password}" required="true" requiredMessage="Enter a valid password"  styleClass="input" />
                <h:message for="password" styleClass="error-message" />

                <h:outputText value="Profile Picture"/><br/>
                <p:fileUpload id="pp" listener="#{userBean.upload}" mode="advanced" dragDropSupport="false"
                              auto="true"
                          update="messages" sizeLimit="10000000" fileLimit="1" allowTypes="/(\.|\/)(jpe?g|png)$/" />
                <p:growl id="messages" showDetail="true" />

                <h:message for="pp" styleClass="error-message" />


            <center>
                <h:commandButton value="Create account" action="#{userBean.createAUser()}"
                                 styleClass="button is-primary mt-3" ajax="false"/>
                </center>
        </div>
        <center>
            <h:messages globalOnly="true" styleClass="error-message"/>
            <h:link value="Back" outcome="MainPage.xhtml?faces-redirect=true" />
        </center>
    </h:form>
</h:body>
</html>
